<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Write the tests  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/en/icefish/apis_services/reference/afb-test/1_Write_the_tests.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" /> -->

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    











<!--
    LANGUAGE_ROOT /docs/en/
    VERSION_ROOT /docs/en/icefish/apis_services/
    DOCSDIR /docs
    page.language en
-->



<!-- LANGUAGE: en en -->
<!-- VERSION: icefish icefish-->
<header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/en/icefish/getting_started/">Getting Started</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/architecture/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish//hardware/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/devguides/">Developer Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/apis_services/">APIs & Services</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/howto/">How To</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/reference/">Reference</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">

                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
<!--                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'icefish' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form> --> 
                            <!--<script async src="https://cse.google.com/cse.js?cx=015035502323899441113:l83yxim-aao"></script>
                            <div class="gcse-search"></div>-->
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>


<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                API Reference
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/api-reference/0-api-introduction.html">
                API Reference
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/0-introduction.html">
                Introduction
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/1-afm-daemons.html">
                The afm daemons
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2-widgets.html">
                Widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2.1-widgets.html">
                Overview of widgets
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2.2-config.xml.html">
                Widget configuration file
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/3-permissions.html">
                Permissions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-main/4-quick-tutorial.html">
                Quick Tutorial
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Application Framework Binder
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-overview.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-vocabulary.html">
                Binder daemon vocabulary
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-binding-writing.html">
                How to write a binding ?
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Binder references
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/types-and-globals.html">
                Types and globals
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/macro-log.html">
                Macros for logging
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-api.html">
                Functions of class afb_api
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-req.html">
                Functions of class afb_req
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-event.html">
                Functions of class afb_event
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-daemon.html">
                Functions of class afb_daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-service.html">
                Functions of class afb_service
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-events-guide.html">
                Binder events guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-application-writing.html">
                Binder Application writing guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Annexes
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-migration-to-binding-v3.html">
                Migration to bindings v3
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/protocol-x-afb-ws-json1.html">
                WebSocket protocol x-afb-ws-json1
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-desktop-package.html">
                Installing the binder on a desktop
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-options.html">
                Options of afb-daemon
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-debugging.html">
                Debugging binder and bindings
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/legacy/afb-migration-v1-to-v2.html">
                LEGACY Migration from v1 to v2
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/legacy/afb-binding-v2-references.html">
                LEGACY Binding V2 references
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/REVISIONS.html">
                Document revision
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                AGL Test Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/0_Installation.html">
                Installation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="/docs/en/icefish/apis_services/reference/afb-test/1_Write_the_tests.html">
                Write the tests
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/2_The_test_widget.html">
                The test widget
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/3_Launch_the_tests.html">
                Launch the tests
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/4_Tests_Examples.html">
                Tests examples
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                References
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/0_BindingTestFunctions.html">
                Binding Test Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/1_BindingAssertFunctions.html">
                Binding Assert Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/2_TestFrameworkFunctions.html">
                Test Framework Functions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                LuaUnit Assertion Functions
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/0_GeneralAssertions.html">
                General Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/1_ValueAssertions.html">
                Value Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/2_ScientificAssertions.html">
                Scientific Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/3_StringAssertions.html">
                String Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/4_ErrorAssertions.html">
                Error Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/5_TypeAssertions.html">
                Type Assertions
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/6_TableAssertions.html">
                Table Assertions
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Message Signaling
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/signaling/architecture.html">
                Message Signaling
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                AGL Service CAN Low Level
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/1-Architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/2-Installation.html">
                Installation Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/3-Installation-J1939.html">
                Installation Guide for J1939
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/4-Installation-ISOTP.html">
                Installation Guide for ISOTP
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/5-Usage.html">
                Usage Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                High Leval VIWI Service
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/high-viwi-architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/signaling/2-Install-Usage.html">
                Installation and Usage Guide
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                AGL Service Signal Composer
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/part-1/1-Architecture.html">
                Architecture presentation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/part-1/2-Configuration.html">
                Configuration
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/part-1/3-Plugins.html">
                Plugins
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/part-1/4-SignalComposerAPI.html">
                Signal Composer API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/iotbzh2016/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
                Developer Guidelines
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/iotbzh2016/AGL-Message-Signaling-Developer-Guidelines.pdf">
                CAN Signaling Benchmark
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                CanDevStudio Quickstart
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/1_Usage.html">
                Usage Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/2_can_device_socketcan_backend.html">
                Bringing up a CAN device using socketcan backend
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/3_Add_CAN_Device.html">
                Add a CAN device in CANdevStudio
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/4_Configure_CanRawSender_Node.html">
                Configure a CanRawSender node
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/5_Using_CanRawView.html">
                Using CanRawView
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/app-framework/index.html">
                Resources
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Audio Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/audio/audio/bluez-alsa.html">
                bluez-alsa
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/audio/audio/pipewire.html">
                pipewire
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HMI Framework
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/ApplicationGuide.html">
                Home Screen Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/3_2-WindowManager-Guide.html">
                Window Manager Developer Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/3_3-SoundManager-Guide.html">
                Sound Manager Developper Guide
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/Display_Audio_Transition1.html">
                Sound Manager Developper Guide 2
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/Display_Audio_Transition2.html">
                Sound Manager Developper Guide 3
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HomeScreen (old)
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/homescreen_api.html">
                HomeScreen API
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/api-reference/0-api-introduction.html">
        API Reference
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/0-introduction.html">
        Introduction
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/1-afm-daemons.html">
        The afm daemons
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2-widgets.html">
        Widgets
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2.1-widgets.html">
        Overview of widgets
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/2.2-config.xml.html">
        Widget configuration file
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/3-permissions.html">
        Permissions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-main/4-quick-tutorial.html">
        Quick Tutorial
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-overview.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-vocabulary.html">
        Binder daemon vocabulary
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-binding-writing.html">
        How to write a binding ?
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/types-and-globals.html">
        Types and globals
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/macro-log.html">
        Macros for logging
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-api.html">
        Functions of class afb_api
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-req.html">
        Functions of class afb_req
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-event.html">
        Functions of class afb_event
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-daemon.html">
        Functions of class afb_daemon
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/reference-v3/func-service.html">
        Functions of class afb_service
    </a>
</li>







<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-events-guide.html">
        Binder events guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-application-writing.html">
        Binder Application writing guide
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-migration-to-binding-v3.html">
        Migration to bindings v3
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/protocol-x-afb-ws-json1.html">
        WebSocket protocol x-afb-ws-json1
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-desktop-package.html">
        Installing the binder on a desktop
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-options.html">
        Options of afb-daemon
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/afb-daemon-debugging.html">
        Debugging binder and bindings
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/legacy/afb-migration-v1-to-v2.html">
        LEGACY Migration from v1 to v2
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/legacy/afb-binding-v2-references.html">
        LEGACY Binding V2 references
    </a>
</li>







<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/REVISIONS.html">
        Document revision
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/0_Installation.html">
        Installation
    </a>
</li>




<li>
    <a class="this-page" href="/docs/en/icefish/apis_services/reference/afb-test/1_Write_the_tests.html">
        Write the tests
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/2_The_test_widget.html">
        The test widget
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/3_Launch_the_tests.html">
        Launch the tests
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/4_Tests_Examples.html">
        Tests examples
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/0_BindingTestFunctions.html">
        Binding Test Functions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/1_BindingAssertFunctions.html">
        Binding Assert Functions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/2_TestFrameworkFunctions.html">
        Test Framework Functions
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/0_GeneralAssertions.html">
        General Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/1_ValueAssertions.html">
        Value Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/2_ScientificAssertions.html">
        Scientific Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/3_StringAssertions.html">
        String Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/4_ErrorAssertions.html">
        Error Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/5_TypeAssertions.html">
        Type Assertions
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/afb-test/Reference/LuaUnitAssertionFunctions/6_TableAssertions.html">
        Table Assertions
    </a>
</li>

















<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/signaling/architecture.html">
        Message Signaling
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/1-Architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/2-Installation.html">
        Installation Guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/3-Installation-J1939.html">
        Installation Guide for J1939
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/4-Installation-ISOTP.html">
        Installation Guide for ISOTP
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/5-Usage.html">
        Usage Guide
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/high-viwi-architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/signaling/2-Install-Usage.html">
        Installation and Usage Guide
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/part-1/1-Architecture.html">
        Architecture presentation
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/part-1/2-Configuration.html">
        Configuration
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/part-1/3-Plugins.html">
        Plugins
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/part-1/4-SignalComposerAPI.html">
        Signal Composer API
    </a>
</li>







<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/iotbzh2016/AGL-AppFW-CAN-Signaling-Benchmark.pdf">
        Developer Guidelines
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/iotbzh2016/AGL-Message-Signaling-Developer-Guidelines.pdf">
        CAN Signaling Benchmark
    </a>
</li>








<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/1_Usage.html">
        Usage Guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/2_can_device_socketcan_backend.html">
        Bringing up a CAN device using socketcan backend
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/3_Add_CAN_Device.html">
        Add a CAN device in CANdevStudio
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/4_Configure_CanRawSender_Node.html">
        Configure a CanRawSender node
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/candevstudio/5_Using_CanRawView.html">
        Using CanRawView
    </a>
</li>







<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/af-binder/app-framework/index.html">
        Resources
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/audio/audio/bluez-alsa.html">
        bluez-alsa
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/audio/audio/pipewire.html">
        pipewire
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/ApplicationGuide.html">
        Home Screen Developper Guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/3_2-WindowManager-Guide.html">
        Window Manager Developer Guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/3_3-SoundManager-Guide.html">
        Sound Manager Developper Guide
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/Display_Audio_Transition1.html">
        Sound Manager Developper Guide 2
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/Display_Audio_Transition2.html">
        Sound Manager Developper Guide 3
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/apis_services/reference/hmi-framework/homescreen_api.html">
        HomeScreen API
    </a>
</li>







                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            English
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages -->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            

                            
                            
                            
                            

                            

                            
                            

                            <li>
                                <a href="/docs/en/icefish/apis_services/reference/afb-test/1_Write_the_tests.html" class="">
                                    
                                        <span class="selected">
                                            English
                                        </span>
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>

                    <!-- Version dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            icefish
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language -->
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/master/apis_services/" class="missing-page">
                                    
                                        
                                    master
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/icefish/apis_services/" class="missing-page">
                                    
                                        <span class="selected">
                                            
                                    icefish
                                    
                                
                                        </span>
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/halibut/apis_services/" class="missing-page">
                                    
                                        
                                    halibut
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/guppy/apis_services/" class="missing-page">
                                    
                                        
                                    guppy
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/flounder/apis_services/" class="missing-page">
                                    
                                        
                                    flounder
                                    
                                
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                </div>


                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- master warning
                
                -->

                <!-- outdated warning
                
                    <div class="alert docs-alert alert-danger" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        This version of the documentation is outdated!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/daily-jjb-doc-update/docs-webtemplate/site/_data/tocs/apis_services/icefish/app-afb-test-developer-guides-api-services-book.yml -->

<h1 id="write-the-tests">Write the tests</h1>

<h2 id="create-the-test-tree">Create the test tree</h2>

<p>At the root of your project, create a test-dedicated directory that holds
all your test materials. A classic test tree looks like the following:</p>

<pre><code class="language-tree"> test
 ├── CMakeLists.txt
 └── afb-test
     ├── CMakeLists.txt
     ├── etc
     │   ├── CMakeLists.txt
     │   └── aft-agl-middlename.json
     ├── fixtures
     │   ├── CMakeLists.txt
     │   ├── helper.sh
     │   ├── data
     │   └── plugin.lua
     └── tests
         ├── CMakeLists.txt
         ├── test01.lua
         ├── test02.lua
         └── test03.lua
 ...
</code></pre>

<p>Here is a description of each subdirectory purpose:</p>

<ul>
  <li><em>etc</em>`: Holds the test binding configuration in a JSON file.</li>
  <li><em>fixtures</em>: contains all external needed files to run your tests.
This subdirectory is primarily used to inject data or a plugin
with the mock-up APIs code in a LUA or C plugin.</li>
  <li><em>tests</em>: Contains only the tests written in LUA for your binding.</li>
</ul>

<h2 id="create-your-configuration-file">Create your configuration file</h2>

<p>The configuration file describes your test API and how it launches the tests.
A test binding does not provide verbs.
This configuration describes the API verb(s) and mocked-up APIs.
Following are the <code class="highlighter-rouge">key</code> descriptions for the configuration file:</p>

<h3 id="metadata-section"><code class="highlighter-rouge">metadata</code> section</h3>

<ul>
  <li><code class="highlighter-rouge">uid</code>: A simple label useful for debugging.</li>
  <li><code class="highlighter-rouge">version</code> (optional): The test’s version.</li>
  <li><code class="highlighter-rouge">info</code> (optional): Provides information about the test.</li>
  <li><code class="highlighter-rouge">api</code>: The name your test binding takes.
Formerly, the name was the test API name prefixed with <code class="highlighter-rouge">aft</code>
(i.e. <code class="highlighter-rouge">aft-&lt;tested-api-name&gt;</code>).</li>
  <li><code class="highlighter-rouge">require</code>: The tested API’s name. This key ensure that the tested API is
correctly launched and initialized so the test binding can test it.</li>
</ul>

<h3 id="testverb-section"><code class="highlighter-rouge">testVerb</code> section</h3>

<ul>
  <li><code class="highlighter-rouge">uid</code>: The verb name.</li>
  <li><code class="highlighter-rouge">info</code> (optional): Provides information about the verb.</li>
  <li><code class="highlighter-rouge">action</code>: A special string indicating the function to trigger when the verb is
called. The verb is always the same about the test binding.</li>
  <li><code class="highlighter-rouge">args</code> Contains the following:
    <ul>
      <li><code class="highlighter-rouge">trace</code>: The name of the tested API you are testing. <code class="highlighter-rouge">trace</code> is
 needed to allow the test binding trace the tested API and retrieve through
 the binder’s monitoring feature <code class="highlighter-rouge">calls</code> and <code class="highlighter-rouge">events</code>.</li>
      <li><code class="highlighter-rouge">files</code>: A string or an array of strings of the LUA files with your tests.
 Only provide the file name.  Do not provide the path.</li>
    </ul>
  </li>
</ul>

<h3 id="mapis-mocked-up-api-section"><code class="highlighter-rouge">mapis</code> (mocked up API), section</h3>

<ul>
  <li><code class="highlighter-rouge">uid</code>: The mocked up API’s name</li>
  <li><code class="highlighter-rouge">info</code> (optional): Provides information on the mock-up API.</li>
  <li><code class="highlighter-rouge">libs</code>: The LUA script or C plugin file name.</li>
</ul>

<h4 id="verbs-section"><code class="highlighter-rouge">verbs</code> section</h4>

<p>Describes the implemented mocked up API verbs. Each verb maps to a function
name that is executed when the verb is called.</p>

<ul>
  <li><code class="highlighter-rouge">uid</code>: The verb’s name.</li>
  <li><code class="highlighter-rouge">info</code> (optional): Provides information on the verb.</li>
  <li><code class="highlighter-rouge">action</code>: A URI string that points to a C plugin or LUA script’s function that
is executes when the verb is called. The format of the action URI is:
 <code class="highlighter-rouge">&lt;lua|plugin|api&gt;</code>://<code class="highlighter-rouge">&lt;C plugin's name|api's name|lua script name&gt;</code>#<code class="highlighter-rouge">&lt;function|verb's name&gt;</code></li>
</ul>

<h4 id="events-section"><code class="highlighter-rouge">events</code> section.</h4>

<p>Allows you to trigger a function when a described event is received.
The trigger can be for any event on which you need to apply modifications.
You do not have to enumerate each possible event that the mocked up API can
generate.  You could avoid this section if you do not want to execute a function
when an event is received.</p>

<ul>
  <li><code class="highlighter-rouge">uid</code>: The event’s name (e.g. <code class="highlighter-rouge">&lt;api&gt;/&lt;event-name&gt;</code>)</li>
  <li><code class="highlighter-rouge">info</code> (optional): Provides information about the event.</li>
  <li><code class="highlighter-rouge">action</code>: A URI string that points to a C plugin or LUA script’s function that
is executed when an event is received. The format of the action URI is:
<code class="highlighter-rouge">&lt;lua|plugin|api&gt;</code>://<code class="highlighter-rouge">&lt;C plugin's name|api's name|lua script name&gt;</code>#<code class="highlighter-rouge">&lt;function|verb's name&gt;</code>.
The action <code class="highlighter-rouge">lua://AFT#_evt_catcher_</code> is the default <code class="highlighter-rouge">afb-test</code> events listener.</li>
</ul>

<h3 id="configuration-examples">Configuration examples</h3>

<p>Here is a simple example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iot.bzh/download/public/schema/json/ctl-schema.json#"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iot.bzh/download/public/schema/json/ctl-schema.json#"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello_Test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aft-example"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Binding made to test other bindings"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"hello"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"testVerb"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testing-hello"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Launch the tests against hello api"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://AFT#_launch_test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"trace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"aftTest.lua"</span><span class="p">,</span><span class="s2">"helloworld.lua"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Following is another example that uses a mocked up <code class="highlighter-rouge">low-can</code> API:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iot.bzh/download/public/schema/json/ctl-schema.json#"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"$schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://iot.bzh/download/public/schema/json/ctl-schema.json#"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Other_Tests"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"api"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aft-example"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Binding made to test other bindings"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"tested-api"</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"testVerb"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Complete"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Launch all the tests"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://AFT#_launch_test"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"trace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low-can"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"aftTest.lua"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mapis-tests.lua"</span><span class="w"> </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"mapis"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low-can"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Faked low-can API"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"libs"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mapi_low-can.lua"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verbs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscribe"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subscribe to CAN signals events"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://low-can#_subscribe"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="err">...</span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"write"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Write a CAN messages to the CAN bus."</span><span class="p">,</span><span class="w">
                </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://low-can#_write"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low-can/diagnostic_messages"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://AFT#_evt_catcher_"</span><span class="w">
        </span><span class="p">},{</span><span class="w">
            </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low-can/messages_engine_speed"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://AFT#_evt_catcher_"</span><span class="w">
        </span><span class="p">},{</span><span class="w">
            </span><span class="nt">"uid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"low-can/messages_vehicle_speed"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lua://AFT#_evt_catcher_"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h2 id="the-lua-test-files">The LUA test files</h2>

<p>The test framework uses the LUA language to describe the tests.</p>

<p>You must be aware of two things when you write tests using
this framework: <em>test</em> and <em>assertions</em> functions.</p>

<ul>
  <li><em>Assertions</em> functions test an atomic operation result.
(ie: <code class="highlighter-rouge">1+1 = 2</code>).</li>
  <li><em>Test</em> functions represent a test. These functions represent a set of one
or more <em>assertions</em> that must all succeed in order to valid the test.</li>
</ul>

<p>The framework comes with several <em>test</em> and <em>assertion</em> functions that
allow verb calls and received events to be tested. Use these provided
<em>test</em> functions as a start.  If you
need more functions, use the ones that call a callback. If the test is more complex or
more comprehensive then <em>describe</em> your test function using <em>assert</em> functions.
Following is an example.</p>

<p>See the test framework functions <a href="Reference/0_BindingTestFunctions.html">References</a> for a
comprehensive list of available <em>tests</em> and <em>assertions</em> functions.</p>

<h3 id="tests-example">Tests example</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>    <span class="k">function</span> <span class="nf">_callback</span><span class="p">(</span><span class="n">responseJ</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">assertStrContains</span><span class="p">(</span><span class="n">responseJ</span><span class="p">.</span><span class="n">response</span><span class="p">,</span> <span class="s2">"Some String"</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">function</span> <span class="nf">_callbackError</span><span class="p">(</span><span class="n">responseJ</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">assertStrContains</span><span class="p">(</span><span class="n">responseJ</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">info</span><span class="p">,</span> <span class="s2">"Ping Binder Daemon fails"</span><span class="p">)</span>
    <span class="k">end</span>

    <span class="k">function</span> <span class="nf">_callbackEvent</span><span class="p">(</span><span class="n">eventName</span><span class="p">,</span> <span class="n">eventData</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">eventData</span><span class="p">,</span> <span class="p">{</span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="n">key</span> <span class="o">=</span> <span class="s1">'weird others data'</span><span class="p">,</span> <span class="n">another_key</span> <span class="o">=</span> <span class="mi">123</span><span class="p">.</span><span class="mi">456</span> <span class="p">}})</span>
    <span class="k">end</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">addEventToMonitor</span><span class="p">(</span><span class="s2">"hello/anEvent"</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">addEventToMonitor</span><span class="p">(</span><span class="s2">"hello/anotherEvent"</span><span class="p">,</span> <span class="n">_callbackEvent</span><span class="p">)</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testPingSuccess'</span><span class="p">,</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'ping'</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbResponseEquals</span><span class="p">(</span><span class="s1">'testPingSuccess'</span><span class="p">,</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'ping'</span><span class="p">,</span> <span class="p">{},</span> <span class="s2">"Some String"</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbResponseEquals</span><span class="p">(</span><span class="s1">'testPingSuccess'</span><span class="p">,</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'ping'</span><span class="p">,</span> <span class="p">{},</span> <span class="s2">"Unexpected String"</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbCb</span><span class="p">(</span><span class="s1">'testPingSuccess'</span><span class="p">,</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'ping'</span><span class="p">,</span> <span class="p">{},</span> <span class="n">_callback</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusError</span><span class="p">(</span><span class="s1">'testPingError'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'pingfail'</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbResponseEqualsError</span><span class="p">(</span><span class="s1">'testPingError'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'pingfail'</span><span class="p">,</span> <span class="p">{},</span> <span class="s2">"Ping Binder Daemon fails"</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbResponseEqualsError</span><span class="p">(</span><span class="s1">'testPingError'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'pingfail'</span><span class="p">,</span> <span class="p">{},</span> <span class="s2">"Ping Binder Daemon succeed"</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbCbError</span><span class="p">(</span><span class="s1">'testPingError'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'pingfail'</span><span class="p">,</span> <span class="p">{},</span> <span class="n">_callbackError</span><span class="p">)</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventAdd'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventadd'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'event'</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'anEvent'</span><span class="p">})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventSub'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventsub'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'event'</span><span class="p">})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventPush'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventpush'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'event'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="n">key</span> <span class="o">=</span> <span class="s1">'some data'</span><span class="p">,</span> <span class="n">another_key</span> <span class="o">=</span> <span class="mi">123</span><span class="p">}})</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventAdd'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventadd'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'evt'</span><span class="p">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'anotherEvent'</span><span class="p">})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventSub'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventsub'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'evt'</span><span class="p">})</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testEventPush'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'eventpush'</span><span class="p">,</span> <span class="p">{</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">'evt'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="p">{</span> <span class="n">key</span> <span class="o">=</span> <span class="s1">'weird others data'</span><span class="p">,</span> <span class="n">another_key</span> <span class="o">=</span> <span class="mi">123</span><span class="p">.</span><span class="mi">456</span><span class="p">}})</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testVerbStatusSuccess</span><span class="p">(</span><span class="s1">'testGenerateWarning'</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'verbose'</span><span class="p">,</span> <span class="p">{</span><span class="n">level</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s1">'My Warning message!'</span><span class="p">})</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testEvtGrpReceived</span><span class="p">(</span><span class="s2">"TestEventGroupReceived"</span><span class="p">,{</span><span class="s2">"hello/anEvent"</span><span class="p">,</span><span class="s2">"hello/anotherEvent"</span><span class="p">},</span><span class="mi">300000</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testEvtGrpNotReceived</span><span class="p">(</span><span class="s2">"TestEventGroupNotReceived"</span><span class="p">,{</span><span class="s2">"hello/anEvent"</span><span class="p">,</span><span class="s2">"hello/anotherEvent"</span><span class="p">},</span><span class="mi">300000</span><span class="p">)</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">testEvtReceived</span><span class="p">(</span><span class="s2">"testEvent"</span><span class="p">,</span> <span class="s2">"hello/anEvent"</span><span class="p">,</span><span class="mi">300000</span><span class="p">)</span>
    <span class="n">_AFT</span><span class="p">.</span><span class="n">testEvtReceived</span><span class="p">(</span><span class="s2">"testEventCb"</span><span class="p">,</span> <span class="s2">"hello/anotherEvent"</span><span class="p">,</span><span class="mi">300000</span><span class="p">)</span>

    <span class="n">_AFT</span><span class="p">.</span><span class="n">describe</span><span class="p">(</span><span class="s2">"myTestLabel"</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span>
      <span class="n">_AFT</span><span class="p">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
    <span class="k">end</span><span class="p">)</span>
</code></pre>
</div>



                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://lists.linuxfoundation.org/mailman/listinfo/automotive-discussions">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2019 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2020-03-23 04:31:24 +0000</small>
		
		<br/><small class="stats"><a href="https://git.automotivelinux.org/apps/app-afb-test/plain/docs/1_Write_the_tests.md?h=icefish">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    <!-- 



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: '',
        indexName: '',
        inputSelector: '#header-search-field',
    });
</script>
 -->
            
    

</body>
</html>
