<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Building for Most Intel 64-Bit Hardware Platforms  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/en/icefish/getting_started/reference/getting-started/machines/intel.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" /> -->

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    











<!--
    LANGUAGE_ROOT /docs/en/
    VERSION_ROOT /docs/en/icefish/getting_started/
    DOCSDIR /docs
    page.language en
-->



<!-- LANGUAGE: en en -->
<!-- VERSION: icefish icefish-->
<header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/en/icefish/getting_started/">Getting Started</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/architecture/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish//hardware/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/devguides/">Developer Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/apis_services/">APIs & Services</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/howto/">How To</a>
                        </li>

                        <li >
                            <a href="/docs/en/icefish/reference/">Reference</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">

                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
<!--                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'icefish' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form> --> 
                            <!--<script async src="https://cse.google.com/cse.js?cx=015035502323899441113:l83yxim-aao"></script>
                            <div class="gcse-search"></div>-->
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>


<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Welcome !
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/getting-started-welcome.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Developing an AGL Image
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-intro.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-prep-host.html">
                Preparing Your Build Host
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-download-sw.html">
                Downloading AGL Software
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-initialize-build-environment.html">
                Initializing Your Build Environment
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-cust-build.html">
                Customizing Your Build
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-build.html">
                Building the AGL Image
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="/docs/en/icefish/getting_started/reference/getting-started/machines/intel.html">
                Building for Most Intel 64-Bit Hardware Platforms
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/qemu.html">
                Building for Emulation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/renesas.html">
                Build for R Car Starter Kit gen3 board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/raspberrypi.html">
                Build for Raspberry PI 3/4
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HomeScreen
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/homescreen/index.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Troubleshooting
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/troubleshooting.html">
                Generic issues
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Setting Up a Docker Container
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/docker-container-setup.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Developing an Application
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-intro.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-image.html">
                Download or Build Your Image
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-sdk.html">
                Download or Build Your SDK Installer
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-bootables.html">
                Create Bootable Media
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-boot.html">
                Boot the Image on the Board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-prep-app.html">
                Get Ready to Create Your Application
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-build-app.html">
                Create and Build the Application
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-deploy-app.html">
                Deploy the Application to the Board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-debug-app.html">
                Debug the Application
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/getting-started-welcome.html">
        Overview
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-intro.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-prep-host.html">
        Preparing Your Build Host
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-download-sw.html">
        Downloading AGL Software
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-initialize-build-environment.html">
        Initializing Your Build Environment
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-cust-build.html">
        Customizing Your Build
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/image-workflow-build.html">
        Building the AGL Image
    </a>
</li>




<li>
    <a class="this-page" href="/docs/en/icefish/getting_started/reference/getting-started/machines/intel.html">
        Building for Most Intel 64-Bit Hardware Platforms
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/qemu.html">
        Building for Emulation
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/renesas.html">
        Build for R Car Starter Kit gen3 board
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/machines/raspberrypi.html">
        Build for Raspberry PI 3/4
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/homescreen/index.html">
        Overview
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/troubleshooting.html">
        Generic issues
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/docker-container-setup.html">
        Overview
    </a>
</li>











<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-intro.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-image.html">
        Download or Build Your Image
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-sdk.html">
        Download or Build Your SDK Installer
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-bootables.html">
        Create Bootable Media
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-boot.html">
        Boot the Image on the Board
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-prep-app.html">
        Get Ready to Create Your Application
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-build-app.html">
        Create and Build the Application
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-deploy-app.html">
        Deploy the Application to the Board
    </a>
</li>




<li>
    <a class="" href="/docs/en/icefish/getting_started/reference/getting-started/app-workflow-debug-app.html">
        Debug the Application
    </a>
</li>







                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            English
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages -->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            

                            
                            
                            
                            

                            

                            
                            

                            <li>
                                <a href="/docs/en/icefish/getting_started/reference/getting-started/machines/intel.html" class="">
                                    
                                        <span class="selected">
                                            English
                                        </span>
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>

                    <!-- Version dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            icefish
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language -->
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/icefish/getting_started/" class="missing-page">
                                    
                                        <span class="selected">
                                            
                                    icefish
                                    
                                
                                        </span>
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/halibut/getting_started/" class="missing-page">
                                    
                                        
                                    halibut
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/guppy/getting_started/" class="missing-page">
                                    
                                        
                                    guppy
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/flounder/getting_started/" class="missing-page">
                                    
                                        
                                    flounder
                                    
                                
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                </div>


                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- master warning
                
                -->

                <!-- outdated warning
                
                    <div class="alert docs-alert alert-danger" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        This version of the documentation is outdated!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/daily-jjb-doc-update/docs-webtemplate/site/_data/tocs/getting_started/icefish/image-development-workflow-getting-started-book.yml -->

<h1 id="building-for-most-intel-64-bit-hardware-platforms">Building for Most Intel 64-Bit Hardware Platforms</h1>

<p>Although the reference hardware used by the AGL Project is the 64-bit Open Source MinnowBoard,
you can use the information found on the “<a href="https://minnowboard.org/">MinnowBoard wiki</a>”
to enable most 64-bit Intel Architecture (IA) platforms that use the 64-bit
UEFI as the boot loader.
In addition to the MinnowBoard, support for the
<a href="http://up-board.org/upsquared/specifications/">upCore &amp; UpSquared boards</a> exists.
MinnowBoard Max and Turbot are both 64-bit capable.</p>

<p>If you are interested in creating <strong><em>applications</em></strong> to run on hardware booted
using an image built with the AGL Project, see the following:</p>

<ul>
  <li><a href="../app-workflow-intro.html">Application Development Workflow</a></li>
  <li><a href="https://wiki.automotivelinux.org/agl-distro/developer_resources_intel_apps">Developing Apps for AGL</a></li>
</ul>

<p>UEFI has significantly evolved and you should check that your hardware’s
firmware is up-to-date.
You must make this check for MinnowBoard-Max platforms.
You do not need to make this check for the MinnowBoard-Turbo, upCore, and UpSquared
platforms:</p>

<ul>
  <li><a href="https://firmware.intel.com/projects/minnowboard-max"><code class="highlighter-rouge">https://firmware.intel.com/projects/minnowboard-max</code></a></li>
  <li>
    <p>Intel automotive Module Reference Board (MRB)</p>

    <p><strong>NOTES:</strong> By default, these MRBs ship with an Automotive
Fast Boot loader (ABL), which requires encrypted images.
You can ask Intel’s “Engineering Sales support” for a special version
of the MRB that does not require an encrypted image.
You need this type of MRB in order to test AGL on the development board.
Contact your Intel technical support representative to get the non-signed
ABL firmware.</p>
  </li>
</ul>

<h2 id="making-sure-your-build-environment-is-correct">1. Making Sure Your Build Environment is Correct</h2>

<p>The
“<a href="../image-workflow-initialize-build-environment.html">Initializing Your Build Environment</a>”
section presented generic information for setting up your build environment
using the <code class="highlighter-rouge">aglsetup.sh</code> script.
If you are building for an Intel 64-bit platform, you need to specify some
specific options when you run the script:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">source </span>meta-agl/scripts/aglsetup.sh <span class="se">\</span>
    -m intel-corei7-64 <span class="se">\</span>
    agl-devel agl-demo agl-appfw-smack agl-netboot agl-pipewire
</code></pre>
</div>

<p>The “-m” option specifies the “intel-corei7-64” machine.
If you were building for a Joule developer kit, you would use the
“-m joule” option.</p>

<p>The list of AGL features used with script are appropriate for the AGL demo image suited
for the Intel 64-bit target.
The “agl-netboot” option creates the correct Initial RAM Filesystem (initramfs)
image even if you do not boot from a network.</p>

<h2 id="using-bitbake">2. Using BitBake</h2>

<p>This section shows the <code class="highlighter-rouge">bitbake</code> command used to build the AGL image.
Before running BitBake to start your build, it is good to be reminded that AGL
does provide pre-built images for developers that work with supported hardware.
You can find these pre-built images on the
<a href="https://download.automotivelinux.org/AGL/release">AGL Download web site</a>.</p>

<p>For supported Intel images, the filenames have the following form:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;release-name&gt;/&lt;release-number&gt;/intel-core17-64/deploy/images/intel-core17-64/bzImage-intel-corei7-64.bin
</code></pre>
</div>

<p>Start the build using the <code class="highlighter-rouge">bitbake</code> command.</p>

<p><strong>NOTE:</strong> An initial build can take many hours depending on your
CPU and and Internet connection speeds.
The build also takes approximately 100G-bytes of free disk space.</p>

<p>For this example, the target is “agl-demo-platform”:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  bitbake agl-demo-platform
</code></pre>
</div>

<p>The build process puts the resulting image in the Build Directory:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;build_directory&gt;/tmp/deploy/images/intel-corei7-64/
</code></pre>
</div>

<p>An alternative method for building an image is to use the AGL SDK delivered in a Docker container.</p>

<p>There is currently no SDK dedicated to IA but the SDK provided for the Porter Board can build an IA image without changes (just <code class="highlighter-rouge">aglsetup.sh</code> needs to call for Intel).</p>

<p>See chapter 2 of <a href="http://iot.bzh/download/public/2016/sdk/AGL-Kickstart-on-Renesas-Porter-board.pdf" title="wikilink">Porter QuickStart</a>.</p>

<h2 id="creating-bootable-media">3. Creating Bootable Media</h2>

<p>Typically, you use a USB stick, SD card, or HDD/SDD to create bootable media.
It is possible, however, to install the AGL image onto Embedded MultiMediaCard
(eMMC).
eMMC provides card longevity at a low cost and is used in automotive infotainment
systems, avionics displays, and industrial automation/HMI control applications
to name a few.</p>

<p>When creating bootable media,
<a href="https://linux-audit.com/using-xattrs-extended-attributes-on-linux/">Extended Attributes (<code class="highlighter-rouge">xattrs</code>)</a>
are required for use with
<a href="https://en.wikipedia.org/wiki/Smack_(software)">Smack</a>.
This section describes using the <code class="highlighter-rouge">mkabl-agl.sh</code> or <code class="highlighter-rouge">mkefi-agl.sh</code> scripts
to create bootable media.
Use of either of these scripts include all required <code class="highlighter-rouge">xattrs</code>.</p>

<p><strong>NOTE:</strong> You can find detailed information on Smack at
  <a href="https://www.kernel.org/doc/Documentation/security/Smack.txt">https://www.kernel.org/doc/Documentation/security/Smack.txt</a>.</p>

<p>While the <code class="highlighter-rouge">mkabl-agl.sh</code> or <code class="highlighter-rouge">mkefi-agl.sh</code> scripts are recommended for creating
your bootable media for Intel devices, other methods exist.
If you use an alternative method (e.g. <code class="highlighter-rouge">tar</code>), be sure you take steps to copy
<code class="highlighter-rouge">xattrs</code> as part of the image.
See the
“<a href="../troubleshooting.html#including-extended-attributes">Including Extended Attributes</a>”
section for more information.</p>

<h3 id="usb-stick-sd-card-and-hddsdd">USB Stick, SD Card, and HDD/SDD</h3>

<p>Depending on your target hardware, use a USB stick, an SD card, or an HDD/SDD.
The creation process remains the same independently of the selected support.
It does require to have access to a Linux machine with <code class="highlighter-rouge">sudo</code> or root password.</p>

<p>Create a bootable SD card with the script <a href="https://gerrit.automotivelinux.org/gerrit/gitweb?p=AGL/meta-agl.git;a=blob_plain;f=scripts/mkefi-agl.sh;hb=HEAD"><code class="highlighter-rouge">mkefi-agl.sh</code></a>.
Use the “-v” option to check the available options.</p>

<p><strong>NOTE:</strong> If you are using an Intel Module Reference Board (MRB), you need to
  use the
  <a href="https://gerrit.automotivelinux.org/gerrit/gitweb?p=AGL/meta-agl.git;a=blob_plain;f=scripts/mkefi-agl.sh;hb=HEAD"><code class="highlighter-rouge">mkabl-agl.sh</code></a>
  script instead of the <code class="highlighter-rouge">mkefi-agl.sh</code> script.</p>

<p>Follow these steps to create your bootable media:</p>

<ol>
  <li>
    <p><strong>Insert Media Device:</strong>
Insert your removable media into the corresponding interface.</p>
  </li>
  <li>
    <p><strong>Determine the Name of Your Media Device:</strong>
Use the <code class="highlighter-rouge">lsblk</code> command to make sure you know the name of the device to which you will be writing.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  lsblk
  <span class="c"># You want the name of the raw device and not the name of a partition on the media.</span>
  <span class="c">#(e.g. /dev/sdc or /dev/mmcblk0)</span>
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>Download the <code class="highlighter-rouge">mkefi-agl.sh</code> Script:</strong>
You can find the script in the “meta-agl/scripts” folder of your AGL source files.</p>

    <p>Alternatively, you can download the script from the following Git repository:</p>

    <p><a href="https://github.com/dominig/mkefi-agl.sh">https://github.com/dominig/mkefi-agl.sh</a></p>
  </li>
  <li>
    <p><strong>Create Your Bootable Media:</strong>
Run the following to see <code class="highlighter-rouge">mkefi-agl.sh</code> usage information:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>  ./mkefi-agl.sh -v
</code></pre>
    </div>

    <p>Supply the name of your actual image and device name and run the script.
The following example assumes a USB device (e.g. <code class="highlighter-rouge">/dev/sdb</code>) and the image
<code class="highlighter-rouge">intel-corei7-64.hdd</code>:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>sudo ./mkefi-agl.sh intel-corei7-64.hdd /dev/sdb
<span class="c"># /dev/sdX is common for USB stick where "X" is "b".</span>
<span class="c"># /dev/mmcblk0 is common for an integrated SD card reader in a notebook computer.</span>
</code></pre>
    </div>
  </li>
</ol>

<h3 id="embedded-multimediacard-emmc">Embedded MultiMediaCard (eMMC)</h3>

<p>It is possible to install the AGL image directly on the internal eMMC
rather than a removable device such as a USB stick or SD card.
To do so, requires the following steps:</p>

<ol>
  <li>
    <p><strong>Add Required Tools to Your AGL Image:</strong></p>

    <p>Add a file named <code class="highlighter-rouge">site.conf</code> in your <code class="highlighter-rouge">build/conf</code> directory.
Make sure the file has the following content:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>INHERIT += "rm_work"
IMAGE_INSTALL_append = " linux-firmware-iwlwifi-7265d"
IMAGE_INSTALL_append = " parted e2fsprogs dosfstools"
IMAGE_INSTALL_append = " linux-firmware-i915 linux-firmware-ibt linux-firmware-iwlwifi-8000c"
</code></pre>
    </div>
    <p>In addition to the previous statements, you need to add the
Intel Wireless WiFi Link (<code class="highlighter-rouge">iwlifi</code>) driver for your own device
as needed.</p>
  </li>
  <li>
    <p><strong>Rebuild Your Image</strong></p>

    <p>Rebuild the AGL image by following the instructions in the
“<a href="../machines/intel.html#2-using-bitbake">Using BitBake</a>”
step of this page.</p>
  </li>
  <li>
    <p><strong>Install the Rebuilt Image Onto a Removable Device</strong></p>

    <p>Follow the steps previously described here to copy the new
image onto a removable device such as a USB stick.</p>
  </li>
  <li>
    <p><strong>Copy the Image from the USB Stick to Your Build Host’s Home Directory</strong></p>

    <p>Copy the image you just temporarily installed to the removable
device to your build host’s home directory.
The process uses this image later for installation in the
eMMC.
For example, copy the image file created using the Yocto Project from
the build directory to your home directory:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>cp build/tmp/deploy/images/intel-corei7-64/agl-demo-platform-intel-corei7-64.wic.xz ~/
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>Boot the AGL Image from the Removable Device</strong></p>

    <p>You can see how to boot the image on the target device by
following the procedure in the next section.</p>
  </li>
  <li>
    <p><strong>Connect to Your Device that is Running the Image</strong></p>

    <p>You need to use a Serial Link or SSH to connect to the device running
your image.</p>
  </li>
  <li>
    <p><strong>Determine the eMMC Device Name</strong></p>

    <p>Be sure you know the name of the eMMC device.
Use the <code class="highlighter-rouge">lsblk</code> command.</p>
  </li>
  <li>
    <p><strong>Install the Image into the eMMC</strong></p>

    <p>Use the <code class="highlighter-rouge">mkefi-agl.sh</code> Script to install the image into the eMMC.</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>cat /proc/partitions
</code></pre>
    </div>
  </li>
  <li>
    <p><strong>Remove the USB or SD Boot Device</strong></p>

    <p>Once your image is running on the booted device, you can remove the
media used to boot the hardware.</p>
  </li>
  <li>
    <p><strong>Reboot Your Device</strong></p>

    <p>Cycle through a reboot process and the device will boot from the
eMMC.</p>
  </li>
</ol>

<h2 id="booting-the-image-on-the-target-device">4. Booting the Image on the Target Device</h2>

<p>Be aware of the following when booting your device:</p>

<ul>
  <li>
    <p>Interrupting the boot process is easier to achieve when
using a USB keyboard as opposed to a serial link.</p>
  </li>
  <li>
    <p>During the boot process, USB hubs are not supported.
You need to connect any USB keyboard directly to your device’s
USB socket.</p>
  </li>
  <li>
    <p>It is recommended that you use F9 to permanently change the boot
order rather than interrupt the process for each subsequent boot.
Also, you must have your bootable media plugged in or connected
to the target device before you can permanently change the boot
order.</p>
  </li>
  <li>
    <p>Booting from an SD card is faster as compared to booting from
a USB stick.
Use an SD card for better boot performance.</p>
  </li>
  <li>
    <p>The MinnowBoard, many laptops, and NUC devices do not accept
USB3 sticks during the boot process.
Be sure your image is not on a USB3 stick.</p>
  </li>
</ul>

<p>Use these steps to boot your device:</p>

<ol>
  <li>
    <p>Insert the bootable media that contains the AGL image into the target device.</p>
  </li>
  <li>
    <p>Power on the device.</p>
  </li>
  <li>
    <p>As the device boots, access the boot option screen.
You generally accomplish this with the F12 key during the power up operation.</p>

    <p><strong>NOTE:</strong> When booting a MinnowBoard, you can change the default boot
device by hitting F2 during initial UEFI boot.</p>
  </li>
  <li>
    <p>From the boot option screen, select your bootable media device.</p>
  </li>
  <li>
    <p>Save and exit the screen and let the device boot from your media.</p>

    <p><strong>NOTE:</strong>: Depending on the speed of your removable media, the first boot might
not complete.
If this is the case, reboot the device a second time.
It is common with USB sticks that you need to boot a couple of times.</p>

    <p>For Intel devices, the serial console is configured and activated at the rate of 115200 bps.</p>
  </li>
</ol>

<h2 id="miscellaneous-information">5. Miscellaneous Information</h2>

<p>Following is information regarding serial debug ports, serial cables, and
port names for connected displays.</p>

<h3 id="serial-debug-port">Serial Debug Port</h3>

<p>Serial debug port IDs vary across hardware platforms.
By default, when you build an AGL image for an Intel target such as the
Minnowboard, Module Reference Board (MRB), or Up board, the serial debug
ports are as follows:</p>

<ul>
  <li>MinnowBoard uses <code class="highlighter-rouge">/dev/ttyS0</code></li>
  <li>MRB uses <code class="highlighter-rouge">/dev/ttyS2</code></li>
  <li>Up boards the <code class="highlighter-rouge">/dev/ttyS0</code> serial port is difficult to access.
Using <code class="highlighter-rouge">/dev/ttyS4</code> is preferred, which is routed on the Arduino
connector.
See the <a href="http://www.up-board.org/wp-content/uploads/2017/11/UP-Square-DatasheetV0.5.pdf">Up2 Pin Specification</a>
for more information.</li>
</ul>

<p>Depending on your particular hardware, you might need to change the
configuration in your bootloader, which is located in the EFI partition.</p>

<h3 id="serial-debug-cable">Serial Debug Cable</h3>

<p>On the MinnowBoard, the serial debug cable is an FTDI serial cable.
You can learn more <a href="https://minnowboard.org/tutorials/best-practice-serial-connection">here</a>.</p>

<p>Up Boards use the same FDDI 3.3V adapter as does the MinnowBoard.
However, the pin out is not adjacent and requires split pins.</p>

<h3 id="port-names-and-connected-displays">Port Names and Connected Displays</h3>

<p>Port naming can change across hardware platforms and connected displays.
The simplest way to determine the port name used for a connected display
is to check the after the initial boot process completes.
You can make this check in the <code class="highlighter-rouge">systemd</code> journal as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>journalctl | grep Output
</code></pre>
</div>

<p><strong>NOTE:</strong> Output for the
<a href="https://www.freedesktop.org/software/systemd/man/journalctl.html"><code class="highlighter-rouge">journalctl</code></a>
command generates only when a real display is connected to the connector on the board.
The file holding that configuration is <code class="highlighter-rouge">/etc/xdg/weston/weston.ini</code>.</p>

<p>Common Display names for Intel platforms are the following:</p>

<ul>
  <li><code class="highlighter-rouge">HDMI-A-1</code></li>
  <li><code class="highlighter-rouge">HDMI-A-2</code></li>
  <li><code class="highlighter-rouge">LVDS-1</code></li>
</ul>




                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://lists.automotivelinux.org/g/agl-dev-community">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2019 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2020-12-03 04:36:57 +0000</small>
		
		<br/><small class="stats"><a href="https://raw.githubusercontent.com/automotive-grade-linux/docs-sources/icefish/docs/getting-started/machines/intel.md">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    <!-- 



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: '',
        indexName: '',
        inputSelector: '#header-search-field',
    });
</script>
 -->
            
    

</body>
</html>
