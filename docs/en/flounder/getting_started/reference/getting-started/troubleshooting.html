<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
	    AGL Developer Site - 
        
            
                Generic issues  -
            
        
    </title>

    <link rel="SHORTCUT ICON" href="/favicon.ico"/>

    

    
    

    <link rel="canonical" href="http://docs.automotivelinux.org/docs/en/flounder/getting_started/reference/getting-started/troubleshooting.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/static/styles/main.css">
    <link rel="stylesheet" type="text/css" href="/static/styles/syntax.css">
    <!-- Algolia Search CSS -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" /> -->

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- <script defer type="text/javascript">
        var disqus_developer = ; // this would set it to developer mode
    </script>-->

    <!-- JS -->
    <script defer type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="/static/js/lib/bootstrap.min.js"></script>
<!--    <script defer type="text/javascript" src="/static/js/lib/ZeroClipboard.js"></script>-->

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', '{}', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    











<!--
    LANGUAGE_ROOT /docs/en/
    VERSION_ROOT /docs/en/flounder/getting_started/
    DOCSDIR /docs
    page.language en
-->



<!-- LANGUAGE: en en -->
<!-- VERSION: flounder flounder-->
<header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="/"><img id="logo_top" src="/static/img/branding/agl_title_793x211.png"/></a>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_left">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="/docs/en/flounder/getting_started/">Getting Started</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder/architecture/">Architecture Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder//hardware/">Hardware Support</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder/devguides/">Developer Guides</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder/apis_services/">APIs & Services</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder/howto/">How To</a>
                        </li>

                        <li >
                            <a href="/docs/en/flounder/reference/">Reference</a>
                        </li>
					</ul>
				</div>
                <div class="nav_bar_right">
                    <ul class="nav navbar-nav">

                        <li >
                            <a href="/contribute">Contribute</a>
                        </li>
                        <li>
<!--                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search 'flounder' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form> --> 
                            <!--<script async src="https://cse.google.com/cse.js?cx=015035502323899441113:l83yxim-aao"></script>
                            <div class="gcse-search"></div>-->
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>


<div class="docs container">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm col-md-4 col-lg-3 site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Welcome !
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/getting-started-welcome.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Developing an AGL Image
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-intro.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-prep-host.html">
                Preparing Your Build Host
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-download-sw.html">
                Downloading AGL Software
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-initialize-build-environment.html">
                Initializing Your Build Environment
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-cust-build.html">
                Customizing Your Build
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-build.html">
                Building the AGL Image
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/intel.html">
                Building for Most Intel 64-Bit Hardware Platforms
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/qemu.html">
                Building for Emulation
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/renesas.html">
                Build for R Car Starter Kit gen3 board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/raspberrypi.html">
                Build for Raspberry PI 3/4
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                HomeScreen
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/homescreen/index.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Troubleshooting
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="this-page" href="/docs/en/flounder/getting_started/reference/getting-started/troubleshooting.html">
                Generic issues
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Setting Up a Docker Container
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/docker-container-setup.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Developing an Application
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-intro.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-image.html">
                Download or Build Your Image
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-sdk.html">
                Download or Build Your SDK Installer
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-bootables.html">
                Create Bootable Media
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-boot.html">
                Boot the Image on the Board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-prep-app.html">
                Get Ready to Create Your Application
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-build-app.html">
                Create and Build the Application
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-deploy-app.html">
                Deploy the Application to the Board
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-debug-app.html">
                Debug the Application
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="col-md-8 col-md-offset-4 col-lg-9 col-lg-offset-3 page-content-container container">
        <div class="page-content row">
            <div class="col-md-offset-1 col-md-10">
                <div class="content-header">

                    <!-- ToC Dropdown (for XS and SM sizes only) -->
                    <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                        <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Table of Contents
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            






<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/getting-started-welcome.html">
        Overview
    </a>
</li>











<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-intro.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-prep-host.html">
        Preparing Your Build Host
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-download-sw.html">
        Downloading AGL Software
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-initialize-build-environment.html">
        Initializing Your Build Environment
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-cust-build.html">
        Customizing Your Build
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/image-workflow-build.html">
        Building the AGL Image
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/intel.html">
        Building for Most Intel 64-Bit Hardware Platforms
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/qemu.html">
        Building for Emulation
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/renesas.html">
        Build for R Car Starter Kit gen3 board
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/machines/raspberrypi.html">
        Build for Raspberry PI 3/4
    </a>
</li>











<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/homescreen/index.html">
        Overview
    </a>
</li>











<li>
    <a class="this-page" href="/docs/en/flounder/getting_started/reference/getting-started/troubleshooting.html">
        Generic issues
    </a>
</li>











<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/docker-container-setup.html">
        Overview
    </a>
</li>











<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-intro.html">
        Overview
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-image.html">
        Download or Build Your Image
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-sdk.html">
        Download or Build Your SDK Installer
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-bootables.html">
        Create Bootable Media
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-boot.html">
        Boot the Image on the Board
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-prep-app.html">
        Get Ready to Create Your Application
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-build-app.html">
        Create and Build the Application
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-deploy-app.html">
        Deploy the Application to the Board
    </a>
</li>




<li>
    <a class="" href="/docs/en/flounder/getting_started/reference/getting-started/app-workflow-debug-app.html">
        Debug the Application
    </a>
</li>







                        </ul>
                    </div>

                    <!--
                    
                    
                        <a class="edit" href=""><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>

                    
                    
                    -->

                    <!-- Language dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="languageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            English
                            <span class="caret"></span>
                        </button>

                        <!-- List all languages -->
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            

                            
                            
                            
                            

                            

                            
                            

                            <li>
                                <a href="/docs/en/flounder/getting_started/reference/getting-started/troubleshooting.html" class="">
                                    
                                        <span class="selected">
                                            English
                                        </span>
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>

                    <!-- Version dropdown -->
                    <div class="dropdown">
                        <button class="btn btn-default dropdown-toggle" type="button" id="versionDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            flounder
                            
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="versionDropdown">

                            <!-- List versions available in this language -->
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/icefish/getting_started/" class="missing-page">
                                    
                                        
                                    icefish
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/halibut/getting_started/" class="missing-page">
                                    
                                        
                                    halibut
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/guppy/getting_started/" class="missing-page">
                                    
                                        
                                    guppy
                                    
                                
                                    
                                </a>
                            </li>
                            
                            <li>
                                
                                

                                

                                
                                
                                

                                

                                
                                <a href="/docs/en/flounder/getting_started/" class="missing-page">
                                    
                                        <span class="selected">
                                            
                                    flounder
                                    
                                
                                        </span>
                                    
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                </div>


                
                
                

                
                

                <!-- Show warnings for special versions -->
                <!-- master warning
                
                -->

                <!-- outdated warning
                
                    <div class="alert docs-alert alert-danger" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        This version of the documentation is outdated!
                        <a href="/docs/en/latest/">
                            Click here for the latest released version.
                        </a>
                    </div>
                
                -->


                <div id="page-toc-source">
                    <!-- WARNING: This file is generated by fetch_docs.js using /w/workspace/daily-jjb-doc-update/docs-webtemplate/site/_data/tocs/getting_started/flounder/flounder-image-development-workflow-getting-started-book.yml -->

<h1 id="troubleshooting">Troubleshooting</h1>

<p>This topic describes various areas that could cause you problems.</p>

<h2 id="including-extended-attributes">Including Extended Attributes</h2>

<p>The
<a href="https://linux-audit.com/using-xattrs-extended-attributes-on-linux/">Extended Attributes Set (<code class="highlighter-rouge">xattrs</code>)</a>
associated with the image during its construction must be copied to
the bootable media.
The <code class="highlighter-rouge">xattrs</code> supports
<a href="https://en.wikipedia.org/wiki/Smack_(software)">Smack</a>, which is a
Simplified Mandatory Access Control kernel.</p>

<p><strong>NOTE:</strong> See
  <a href="https://www.kernel.org/doc/Documentation/security/Smack.txt">https://www.kernel.org/doc/Documentation/security/Smack.txt</a>.
  for detailed information on Smack.</p>

<p>Many methods exist that allow you to create bootable media (e.g. <code class="highlighter-rouge">dd</code>, <code class="highlighter-rouge">bmaptools</code>,
<code class="highlighter-rouge">tar</code>, and AGL-provided scripts such as <code class="highlighter-rouge">mkabl-agl.sh</code> and <code class="highlighter-rouge">mkefi-agl.sh</code>).
It is recommended that you do not use <code class="highlighter-rouge">tar</code> to create bootable media.
However, if you do, you must take these steps to copy <code class="highlighter-rouge">xattrs</code> to the media:</p>

<ol>
  <li>
    <p>Verify your <code class="highlighter-rouge">tar</code> version is 1.28 or newer:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>tar --version
tar <span class="o">(</span>GNU tar<span class="o">)</span> 1.28
<span class="o">[</span>snip]
</code></pre>
    </div>
  </li>
  <li>
    <p>Optionally update <code class="highlighter-rouge">tar</code> if required.
Most systems come with <code class="highlighter-rouge">tar</code> installed.
If you need to install it, see the
“<a href="https://www.howtoforge.com/tutorial/linux-tar-command/#installing-tar">Installing tar</a>”
section for instructions.</p>

    <p>When you build an AGL distribution, a native up-to-date version of
<code class="highlighter-rouge">tar</code> is created.
Use the following command to see that version:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>tmp/sysroots/x86_64-linux/usr/bin/tar-native/tar --version
tar <span class="o">(</span>GNU tar<span class="o">)</span> 1.28
<span class="o">[</span>snip]
</code></pre>
    </div>
  </li>
  <li>
    <p>Copy the AGL files and Extended Attributes Set to your bootable media:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>tar --extract --xz --numeric-owner --preserve-permissions --preserve-order --totals <span class="se">\</span>
           --xattrs-include<span class="o">=</span><span class="s1">'*'</span> --directory<span class="o">=</span>DESTINATION_DIRECTORY --file<span class="o">=</span>agl-demo-platform.....tar.xz
</code></pre>
    </div>
  </li>
</ol>

<h2 id="screen-orientation-for-splash-and-in-weston">Screen orientation for Splash and in Weston</h2>

<p>Depending of your scren mounting the default orientation of the UI an/or splash screen might be incorrect.
To change the orientation of the splash screen patch</p>

<div class="highlighter-rouge"><pre class="highlight"><code>File: /etc/systemd/system/sysinit.target.wants/psplash-start.service
Line:  <span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/psplash -n -a 90
</code></pre>
</div>

<p>To change the orientation of the UI in Weston patch</p>

<div class="highlighter-rouge"><pre class="highlight"><code>File: /etc/xdg/weston/weston.ini
Line: <span class="nv">transform</span><span class="o">=</span>90
</code></pre>
</div>

<h2 id="disabling-homescreen-in-agl-40x-dd-release">Disabling Homescreen in AGL 4.0.x DD release</h2>

<p><strong>Problem</strong>: new installed applications are not available on Homescreen and even if started manually through afm-util, the application starts but no surface appears.</p>

<p><strong>Answer</strong>: this is due to IVI-Shell integration with Qt and Homescreen.</p>

<p>To disable IVI-Shell and revert to the “plain old” weston desktop, you can follow the 4 steps below:</p>

<ul>
  <li>Modify <em>/etc/xdg/weston/weston.ini</em> and comment the line mentioning IVI-shell. For example on Porter board:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>           <span class="o">[</span>core]
           <span class="nv">backend</span><span class="o">=</span>drm-backend.so
           <span class="c">#shell=ivi-shell.so</span>
           ...
</code></pre>
</div>

<ul>
  <li>modify <em>/etc/afm/unit.env.d/qt-for-ivi-shell</em> and comment the line specifying QT Wayland backend:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>           ...
           <span class="c">#Environment=QT_WAYLAND_SHELL_INTEGRATION=ivi-shell</span>
           ...
</code></pre>
</div>

<p>(If you use vi, remove backup files by <code class="highlighter-rouge">rm /etc/afm/unit.env.d/*~</code>)</p>

<ul>
  <li>disable Homescreen services:</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>           <span class="c"># systemctl --user mask HomeScreen.service</span>
</code></pre>
</div>

<ul>
  <li>Reboot your target and you should then be able to start apps on the standard weston screen using afm-util</li>
</ul>

<h2 id="adding-media-files-to-play-with-mediaplayer">Adding media files to play with MediaPlayer</h2>

<p>AGL include the default MediaPlayer sample app which can be used to play music. The <code class="highlighter-rouge">lightmediascanner.service</code> by default will search for media under the <code class="highlighter-rouge">/media</code> folder. So if you plug in any USB stick containing music, they would be recognized and showed in the playlist of the MediaPlayer app menu.</p>

<p>The current supported format is OGG. Please convert your files to ogg to play with MediaPlayer.</p>

<p>In case you want to store music in another place, modify the <code class="highlighter-rouge">/usr/lib/systemd/user/lightmediascanner.service</code> file and change the <code class="highlighter-rouge">--directory</code> parameter to the path of that folder.</p>

<p>If you don’t want to touch the ligthmediascanner service, you can also add a folder named “Music” under <code class="highlighter-rouge">/home/root</code> and put your music files there.</p>

<h2 id="configuring-the-audio-hardware">Configuring the Audio hardware</h2>

<p>AGL uses alsa as Audio configuration master. If the correct HW is not setup, the Audio system will fail to start what will also fails the demo Home Screen launch.
You need to configure Audio in 2 places</p>

<ul>
  <li>alsa</li>
  <li>4A HAL</li>
</ul>

<h3 id="alsa">alsa</h3>

<p>The file /etc/asound.conf (at the beginning) tells which hardware will be used.
 For example on an Intel Minnow or UP board your need to enter the following configuration.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   pcm.Speakers <span class="o">{</span>
      <span class="nb">type </span>dmix
      slave <span class="o">{</span>pcm <span class="s2">"hw:PCH,3"</span><span class="o">}</span>
      ipc_key 1001          <span class="c"># ipc_key should be unique to each dmix</span>
  <span class="o">}</span>
</code></pre>
</div>

<p>The correct value (here hw:PCH,3) can be obtained with the command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  aplay -l
  <span class="k">****</span> List of PLAYBACK Hardware Devices <span class="k">****</span>
  card 0: PCH <span class="o">[</span>HDA Intel PCH], device 3: HDMI 0 <span class="o">[</span>HDMI 0]
    Subdevices: 1/1
    Subdevice <span class="c">#0: subdevice #0</span>
  card 0: PCH <span class="o">[</span>HDA Intel PCH], device 7: HDMI 1 <span class="o">[</span>HDMI 1]
    Subdevices: 1/1
    Subdevice <span class="c">#0: subdevice #0</span>
</code></pre>
</div>

<p>Using hw:PCH rather than hw:0 will avoid you many trouble.\
NOTE that the device number is not always 0. If you give no device number, alsa will assume device 0 (and the not the first available device), what can fail your configuration.\
As the default is hw:0 (card 0 device 0), it will always fail on a Minnow or UP board.</p>

<p>For info HW device for common configuration are:</p>

<ul>
  <li>for USB Audio -&gt; hw:AUDIO,0</li>
  <li>for Intel Analog output -&gt; hw:PCH,0 (not available on Minnow, Joule, Up boards, …)</li>
  <li>for Intel via -&gt; HDMI hw:PCH,3</li>
  <li>for MOST Unicens -&gt; hw:ep016ch,0</li>
</ul>

<h3 id="a-hal-configuration">4A HAL configuration</h3>

<p>AGL 4A needs to know which HAL shall be used. This is configured in the file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/usr/agl-service-audio-4a/ahl-agl-service-audio-4a-config.json
</code></pre>
</div>

<p>At the beginning of that file you will find the slected HAL (note the there is no correct default value).</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">{</span>
    <span class="s2">"version"</span>: <span class="s2">"0.2.0"</span>,
    <span class="s2">"policy_module"</span>: <span class="s2">"AudioPolicy_v1"</span>,
    <span class="s2">"description"</span>: <span class="s2">"High-level binding configuration file"</span>,
    <span class="s2">"note"</span>: <span class="s2">"Devices and routings are always listed in order of priority (for device selection rules)"</span>,
    <span class="s2">"hal_list"</span>: <span class="o">[</span><span class="s2">"intel-minnow"</span><span class="o">]</span>,
    <span class="s2">"audio_roles"</span>: <span class="o">[</span>
</code></pre>
</div>

<p>Here you see “intel-minnow” but common values are:</p>

<ul>
  <li>Intel laptop -&gt; intel-pc</li>
  <li>Intel via HDMI -&gt; intel-minnow</li>
  <li>Renesas -&gt; Rcar-M3</li>
  <li>USB Audio Speaker -&gt; usb-audio</li>
  <li>MOSTS Unicens -&gt; hal-most-unicens</li>
</ul>

<p>More HAL can be found on Gerrit (search projects named as 4a-hal*)</p>

<h2 id="installing-the-map-for-the-navigation-application">Installing the Map for the Navigation Application</h2>

<p>While the Navigation App is installed with all other demo Apps at first boot, the Maps required to be installed manually.</p>

<h3 id="a-method-1-on-target-download">a) Method 1 on target download</h3>

<ol>
  <li>Install the new image on the target</li>
  <li>boot a first time to install the demo Apps</li>
  <li>via ssh or serial connection, execute the script
    <ul>
      <li>/usr/AGL/apps/download_mapdata_uk.sh\
or</li>
      <li>/usr/AGL/apps/download_mapdata_jp.sh</li>
    </ul>
  </li>
</ol>

<h3 id="b-at-image-creation">b) At image creation</h3>

<p>Download on your build machine the desired maps and uncompress them on your target image before 1st boot.
This method is quicker and does not require to have the network enabled on the target device.
Map can be found here.</p>

<ul>
  <li><a href="http://agl.wismobi.com/data/japan_TR9/navi_data.tar.gz">http://agl.wismobi.com/data/japan_TR9/navi_data.tar.gz</a></li>
  <li><a href="http://agl.wismobi.com/data/UnitedKingdom_TR9/navi_data_UK.tar.gz">http://agl.wismobi.com/data/UnitedKingdom_TR9/navi_data_UK.tar.gz</a></li>
</ul>

<p>Once that you have built your image on the SD card, uncompress the desired map in on the SD card at the position /YourMountPoint/var/mapdata\
(YourMountPoint will vary with your build system).</p>

<p>You can also use the script from the image to install the Mapdata on your SD card but there is little adavange in using that method. e.g.</p>

<ul>
  <li>download_mapdata_jp.sh /YourMountPoint</li>
</ul>



                </div>
            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">AGL Developer Community</a>
                    </li>
                    <li>
                        <a href="https://www.automotivelinux.org/software/download/">Download Distribution</a>
                    </li>
                    <li>
                        <a href="https://gerrit.automotivelinux.org/gerrit/#/admin/projects/">Source Code on Git</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://lists.automotivelinux.org/g/agl-dev-community">Mailing List</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/agl-distro/source-code">Source Code</a></li>
                    <li><a target="_blank" href="https://jira.automotivelinux.org/browse/SPEC/?selectedTab=com.atlassian.jira.jira-projects-plugin:summary-panel">Issue Tracker</a></li>
                    <li><a target="_blank" href="https://wiki.automotivelinux.org/">Wiki</a></li>
                    <li><a href="https://www.automotivelinux.org/contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Automotive Grade Linux @ Linux Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/">About AGL</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.linuxfoundation.org/">About Linux Foundation</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://wiki.automotivelinux.org/start/getting-started">Join AGL community</a>
                    </li>
                    <li>
                        <a target="_blank" href="https://www.automotivelinux.org/about/members">Members</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help AGL move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/autogradelinux" class="twitter-follow-button" data-show-count="false">Follow @autogradelinux</a></p>
    </div>
</div>
<div class="row">
	<div class="col-sm-9">
		<p class="copyright_text">
			Copyright &copy; 2015-2019 Automotive Grade Linux Documentation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
			<br/>
			Automotive Grade Linux and logos are <a target="_blank" href="http://www.linuxfoundation.org">trademarks</a> of The Linux Foundation.
			<br/>
			Initial site design from <a href="https://cordova.apache.org/">Cordova website.</a> - warm thanks !
		</p>
	</div>
    <div class="col-sm-3">
		<small class="stats">Page rendered at:  2020-11-27 04:31:54 +0000</small>
		
		<br/><small class="stats"><a href="https://raw.githubusercontent.com/automotive-grade-linux/docs-sources/flounder/docs/getting-started/troubleshooting.md">Link to source document</small>
		
	</div>
</div>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="/static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="/static/js/docs.js"></script>

    <script defer type="text/javascript" src="/static/js/twitter.js"></script>
    <!-- 



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: '',
        indexName: '',
        inputSelector: '#header-search-field',
    });
</script>
 -->
            
    

</body>
</html>
